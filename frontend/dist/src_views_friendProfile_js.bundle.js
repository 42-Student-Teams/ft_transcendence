"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkfrontend_pong"] = self["webpackChunkfrontend_pong"] || []).push([["src_views_friendProfile_js"],{

/***/ "./src/components/profile/FriendMatchHistory.js":
/*!******************************************************!*\
  !*** ./src/components/profile/FriendMatchHistory.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ FriendMatchHistory)\n/* harmony export */ });\n/* harmony import */ var _library_component_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../library/component.js */ \"./src/library/component.js\");\n\n\nclass FriendMatchHistory extends _library_component_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor() {\n        super({ element: null });\n        this.friendUsername = null;\n        this.matches = [];\n    }\n\n    setUsername(username) {\n        this.friendUsername = username;\n        this.fetchMatchData();\n    }\n\n    async fetchMatchData() {\n        if (!this.friendUsername) {\n            console.error(\"Friend username not set\");\n            return;\n        }\n\n        try {\n            const jwt = localStorage.getItem('jwt');\n            const apiurl = {\"API_URL\":\"/backend\",\"CLIENT_ID\":\"xxx\",\"CLIENT_SECRET\":\"xxx\",\"REDIRECT_URI\":\"https://pong.ch/oauthcallback\",\"AUTHORIZATION_URL\":\"https://api.intra.42.fr/oauth/authorize\",\"TOKEN_URL\":\"/api/oauth/token\"}.API_URL;\n            const response = await fetch(`${apiurl}/history_getGames?username=${this.friendUsername}`, {\n                method: 'GET',\n                headers: {\n                    'Authorization': `Bearer ${jwt}`,\n                    'Content-Type': 'application/json'\n                }\n            });\n            if (response.ok) {\n                const data = await response.json();\n                this.matches = data.historique || [];\n                this.render();\n            } else {\n                console.error('Failed to fetch match history');\n            }\n        } catch (error) {\n            console.error('Error:', error);\n        }\n    }\n\n    render() {\n        this.element = document.getElementById('friendMatchHistory');\n        if (!this.element) {\n            console.error(\"Element 'friendMatchHistory' not found\");\n            return;\n        }\n\n        const view = /*html*/ `\n        <div class=\"card p-3 flex-grow-1 d-flex flex-column\">\n            <div class=\"card-content flex-grow-1 d-flex flex-column\">\n                <div class=\"card-body p-0 flex-grow-1 d-flex flex-column justify-content-between\">\n                    <div class=\"my-1\"></div>\n                    ${this.matches.map(match => this.createMatch(match)).join('<div class=\"border-top my-3\"></div>')}\n                    <div class=\"my-1\"></div>\n                </div>\n            </div>\n        </div>\n        `;\n        this.element.innerHTML = view;\n    }\n\n    createMatch(match) {\n        const result = match.gagnant_username === this.friendUsername ? \"Victory\" : \"Defeat\";\n        const score = `${match.score_joueur1}-${match.score_joueur2}`;\n        const date = new Date(match.date_partie).toLocaleString();\n\n        return `\n        <div class=\"d-flex justify-content-between align-items-center my-3\">\n            <div class=\"d-flex flex-column align-items-center\">\n                <img src=\"https://via.placeholder.com/60\" alt=\"Profile\" class=\"img-fluid rounded-circle mb-1\">\n            </div>\n            <div class=\"text-center\">\n                <h6 class=\"mb-0\">${result}</h6>\n                <p class=\"mb-0\">${score}</p>\n                <small class=\"text-muted\">${date}</small>\n            </div>\n            <img src=\"https://via.placeholder.com/60\" alt=\"Second Image\" class=\"img-fluid rounded-circle\">\n        </div>\n        `;\n    }\n}\n\n//# sourceURL=webpack://frontend-pong/./src/components/profile/FriendMatchHistory.js?");

/***/ }),

/***/ "./src/views/friendProfile.js":
/*!************************************!*\
  !*** ./src/views/friendProfile.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ FriendProfile)\n/* harmony export */ });\n/* harmony import */ var _library_component_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../library/component.js */ \"./src/library/component.js\");\n/* harmony import */ var _components_home_navbar_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/home/navbar.js */ \"./src/components/home/navbar.js\");\n/* harmony import */ var _components_profile_FriendProfileInfo_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/profile/FriendProfileInfo.js */ \"./src/components/profile/FriendProfileInfo.js\");\n/* harmony import */ var _components_profile_FriendMatchHistory_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/profile/FriendMatchHistory.js */ \"./src/components/profile/FriendMatchHistory.js\");\n\n\n\n\n\nclass FriendProfile extends _library_component_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n    constructor() {\n        super({ element: document.createElement('div') });\n        this.friendUsername = null;\n        this.components = {\n            navBar: new _components_home_navbar_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](),\n            friendProfileInfo: new _components_profile_FriendProfileInfo_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](),\n            friendMatchHistory: new _components_profile_FriendMatchHistory_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"](),\n        };\n    }\n\n    setFriendUsername(username) {\n        console.log(\"FriendProfile: Setting friend username:\", username);\n        this.friendUsername = username;\n        this.render();\n    }\n\n    render() {\n        console.log(\"FriendProfile: Rendering with username:\", this.friendUsername);\n        const view = /*html*/ `\n        <div class=\"h-100 d-flex flex-column bg-custom vh-100\">\n            <div class=\"row m-0\">\n                <nav class=\"navbar navbar-expand bg-white shadow-sm w-100 mb-0\" id=\"navBar\"></nav>\n            </div>\n            <div class=\"container-fluid p-0 row flex-fill overflow-hidden m-0\">\n                <div class=\"col-md-4 d-flex flex-column overflow-auto p-0\">\n                    <div id=\"friendProfileInfo\" class=\"m-4\"></div>\n                </div>\n                <div class=\"col-md-8 d-flex flex-column overflow-auto p-0\">\n                    <div id=\"friendMatchHistory\" class=\"flex-grow-1 d-flex flex-column mt-4 me-4 mb-4\"></div>\n                </div>\n            </div>\n        </div>\n        `;\n        this.element.innerHTML = view;\n        \n        // Rendre la barre de navigation\n        this.components.navBar.render();\n\n        // Définir le nom d'utilisateur et rendre FriendProfileInfo\n        this.components.friendProfileInfo.setFriendUsername(this.friendUsername);\n        \n        // Définir le nom d'utilisateur et rendre FriendMatchHistory\n        this.components.friendMatchHistory.setUsername(this.friendUsername);\n    }\n}\n\n//# sourceURL=webpack://frontend-pong/./src/views/friendProfile.js?");

/***/ })

}]);